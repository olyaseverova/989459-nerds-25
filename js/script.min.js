let link = document.querySelector(".contact-button"); let popup = document.querySelector(".modal-text-us"); let close = document.querySelector(".button-close"); let form = popup.querySelector("form"); let yourname = popup.querySelector("[name=your-name]"); let email = popup.querySelector("[name=e-mail]"); let letter = popup.querySelector("[name=letter-text]"); let storage = ""; let isStorageSupport = true; try { storage = localStorage.getItem("yourname") } catch (err) { isStorageSupport = false } link.addEventListener("click", function (a) { a.preventDefault(); popup.classList.add("modal-show"); if (storage) { yourname.value = storage; email.focus() } else { yourname.focus() } }); close.addEventListener("click", function (a) { a.preventDefault(); popup.classList.remove("modal-show"); popup.classList.remove("modal-error") }); form.addEventListener("submit", function (a) { if (!yourname.value || !email.value) { a.preventDefault(); popup.classList.add("modal-error") } else { localStorage.setItem("yourname", yourname.value) } }); window.addEventListener("keydown", function (a) { if (a.keyCode === 27) { a.preventDefault(); if (popup.classList.contains("modal-show")) { popup.classList.remove("modal-show"); popup.classList.remove("modal-error") } } });